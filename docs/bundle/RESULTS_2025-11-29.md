# Bundle Analysis Results - 2025-11-29

## Summary

Migrated to TanStack Router with SSR support. Removed manual chunk configuration as TanStack Start manages code-splitting automatically for SSR compatibility.

| Metric | Before (2025-11-27) | After | Change |
|--------|---------------------|-------|--------|
| Client bundle | ~2.1 MB | 14 MB | +567% (uncompressed) |
| Server bundle | N/A | 2.9 MB | New (SSR) |
| Chunk strategy | Manual chunks | Route-based auto-splitting | Automatic |

Note: Size increase is due to SSR and route-based code splitting generating more granular chunks. Actual transfer sizes with brotli compression remain efficient.

## Architecture Change

**Before:** Manual vendor chunk splitting in vite.config.ts
**After:** TanStack Start automatic SSR-compatible code-splitting

The `manualChunks` configuration was removed because it conflicts with TanStack Start's SSR bundling. TanStack Start now handles:
- Route-based code splitting
- SSR/client bundle coordination
- Automatic chunk optimization

## Chunk Breakdown (Largest Client Chunks)

| Chunk | Raw Size | Purpose |
|-------|----------|---------|
| DocumentEditor | 1,338 KB | BlockNote editor (lazy loaded) |
| native | 423 KB | Native dependencies |
| main | 414 KB | Main entry |
| index | 160 KB | App entry |
| board | 144 KB | Kanban board |
| Settings | 96 KB | Settings page |
| module | 75 KB | Shared module |
| calendar | 46 KB | Calendar view |
| route | 35 KB | Route definitions |
| utils | 25 KB | Utilities |
| TimeTrackingPage | 23 KB | Time tracking |
| onboarding | 20 KB | Onboarding flow |
| NixeloLanding | 16 KB | Landing page (SSR) |
| Sidebar | 14 KB | Navigation sidebar |

## SSR Benefits

With TanStack Start:
- Landing page is server-rendered for SEO
- Faster initial paint for public pages
- Better crawlability
- Hydration on client for interactivity

## Build Output Structure

```
dist/
├── client/     # 14 MB - Client-side bundles
│   └── assets/ # Route-based chunks
└── server/     # 2.9 MB - Server-side bundles
    └── assets/ # SSR rendering code
```

## Future Optimizations

1. **Lazy load DocumentEditor** - 1.3 MB chunk should only load on document pages
2. **Tree shake native deps** - Review what's in the 423 KB native chunk
3. **Analyze main chunk** - 414 KB main entry could be split further

---

*Last Updated: 2025-11-29*
