@import "tailwindcss";
@plugin "tailwindcss-animate";

/* Enable class-based dark mode */
@variant dark (&:where(.dark, .dark *));

@theme {
  /* Font Family */
  --font-family-sans: "Inter var", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;

  /* Border Radius */
  --radius: 8px;
  --radius-secondary: 4px;
  --radius-container: 12px;

  /* Box Shadows */
  --shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
  --shadow-hover: 0 2px 8px rgba(0, 0, 0, 0.12);

  /* ============================================================
   * TIER 2 — Semantic tokens (what components use)
   * All defined via light-dark() so dark mode is automatic.
   * ============================================================ */

  /* --- Surface (5 vars) --- */
  --color-ui-bg: light-dark(var(--p-white), var(--p-gray-900));
  --color-ui-bg-secondary: light-dark(var(--p-gray-50), var(--p-gray-800));
  --color-ui-bg-tertiary: light-dark(var(--p-gray-100), var(--p-gray-700));
  --color-ui-bg-elevated: light-dark(var(--p-white), var(--p-gray-800));
  --color-ui-bg-overlay: light-dark(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.75));

  /* --- Text (4 vars) --- */
  --color-ui-text: light-dark(var(--p-gray-900), var(--p-gray-50));
  --color-ui-text-secondary: light-dark(var(--p-gray-500), var(--p-gray-300));
  --color-ui-text-tertiary: light-dark(var(--p-gray-400), var(--p-gray-400));
  --color-ui-text-inverse: light-dark(var(--p-white), var(--p-gray-900));

  /* --- Border (4 vars) --- */
  --color-ui-border: light-dark(var(--p-gray-200), var(--p-gray-700));
  --color-ui-border-secondary: light-dark(var(--p-gray-300), var(--p-gray-600));
  --color-ui-border-focus: light-dark(var(--p-indigo-600), var(--p-indigo-400));
  --color-ui-border-error: light-dark(var(--p-red-500), var(--p-red-400));

  /* --- Brand (9 vars) --- */
  --color-brand: light-dark(var(--p-indigo-600), var(--p-indigo-400));
  --color-brand-foreground: light-dark(var(--p-white), var(--p-white));
  --color-brand-hover: light-dark(var(--p-indigo-700), var(--p-indigo-300));
  --color-brand-active: light-dark(var(--p-indigo-800), var(--p-indigo-200));
  --color-brand-subtle: light-dark(var(--p-indigo-50), var(--p-indigo-950));
  --color-brand-subtle-foreground: light-dark(var(--p-indigo-600), var(--p-indigo-300));
  --color-brand-muted: light-dark(var(--p-indigo-400), var(--p-indigo-500));
  --color-brand-border: light-dark(var(--p-indigo-200), var(--p-indigo-800));
  --color-brand-ring: light-dark(var(--p-indigo-400), var(--p-indigo-500));

  /* --- Accent (9 vars) --- */
  --color-accent: light-dark(var(--p-purple-600), var(--p-purple-400));
  --color-accent-foreground: light-dark(var(--p-white), var(--p-white));
  --color-accent-hover: light-dark(var(--p-purple-700), var(--p-purple-300));
  --color-accent-active: light-dark(var(--p-purple-800), var(--p-purple-200));
  --color-accent-subtle: light-dark(var(--p-purple-50), var(--p-purple-950));
  --color-accent-subtle-foreground: light-dark(var(--p-purple-600), var(--p-purple-300));
  --color-accent-muted: light-dark(var(--p-purple-400), var(--p-purple-500));
  --color-accent-border: light-dark(var(--p-purple-200), var(--p-purple-800));
  --color-accent-ring: light-dark(var(--p-purple-400), var(--p-purple-500));

  /* --- Status (12 vars) --- */
  --color-status-success: light-dark(var(--p-green-500), var(--p-green-400));
  --color-status-success-bg: light-dark(var(--p-green-50), var(--p-green-950));
  --color-status-success-text: light-dark(var(--p-green-700), var(--p-green-300));
  --color-status-warning: light-dark(var(--p-amber-500), var(--p-amber-400));
  --color-status-warning-bg: light-dark(var(--p-amber-50), var(--p-amber-950));
  --color-status-warning-text: light-dark(var(--p-amber-700), var(--p-amber-300));
  --color-status-error: light-dark(var(--p-red-500), var(--p-red-400));
  --color-status-error-bg: light-dark(var(--p-red-50), var(--p-red-950));
  --color-status-error-text: light-dark(var(--p-red-700), var(--p-red-300));
  --color-status-info: light-dark(var(--p-blue-500), var(--p-blue-400));
  --color-status-info-bg: light-dark(var(--p-blue-50), var(--p-blue-950));
  --color-status-info-text: light-dark(var(--p-blue-700), var(--p-blue-300));

  /* --- Palette (30 vars: 10 colors × 3 variants) --- */
  --color-palette-blue: light-dark(var(--p-blue-500), var(--p-blue-400));
  --color-palette-blue-bg: light-dark(var(--p-blue-50), var(--p-blue-950));
  --color-palette-blue-text: light-dark(var(--p-blue-700), var(--p-blue-300));

  --color-palette-red: light-dark(var(--p-red-500), var(--p-red-400));
  --color-palette-red-bg: light-dark(var(--p-red-50), var(--p-red-950));
  --color-palette-red-text: light-dark(var(--p-red-700), var(--p-red-300));

  --color-palette-green: light-dark(var(--p-green-500), var(--p-green-400));
  --color-palette-green-bg: light-dark(var(--p-green-50), var(--p-green-950));
  --color-palette-green-text: light-dark(var(--p-green-700), var(--p-green-300));

  --color-palette-amber: light-dark(var(--p-amber-500), var(--p-amber-400));
  --color-palette-amber-bg: light-dark(var(--p-amber-50), var(--p-amber-950));
  --color-palette-amber-text: light-dark(var(--p-amber-700), var(--p-amber-300));

  --color-palette-orange: light-dark(var(--p-orange-500), var(--p-orange-400));
  --color-palette-orange-bg: light-dark(var(--p-orange-50), var(--p-orange-950));
  --color-palette-orange-text: light-dark(var(--p-orange-700), var(--p-orange-300));

  --color-palette-purple: light-dark(var(--p-purple-500), var(--p-purple-400));
  --color-palette-purple-bg: light-dark(var(--p-purple-50), var(--p-purple-950));
  --color-palette-purple-text: light-dark(var(--p-purple-700), var(--p-purple-300));

  --color-palette-pink: light-dark(var(--p-pink-500), var(--p-pink-400));
  --color-palette-pink-bg: light-dark(var(--p-pink-50), var(--p-pink-950));
  --color-palette-pink-text: light-dark(var(--p-pink-700), var(--p-pink-300));

  --color-palette-teal: light-dark(var(--p-teal-500), var(--p-teal-400));
  --color-palette-teal-bg: light-dark(var(--p-teal-50), var(--p-teal-950));
  --color-palette-teal-text: light-dark(var(--p-teal-700), var(--p-teal-300));

  --color-palette-indigo: light-dark(var(--p-indigo-500), var(--p-indigo-400));
  --color-palette-indigo-bg: light-dark(var(--p-indigo-50), var(--p-indigo-950));
  --color-palette-indigo-text: light-dark(var(--p-indigo-700), var(--p-indigo-300));

  --color-palette-gray: light-dark(var(--p-gray-500), var(--p-gray-400));
  --color-palette-gray-bg: light-dark(var(--p-gray-50), var(--p-gray-800));
  --color-palette-gray-text: light-dark(var(--p-gray-700), var(--p-gray-300));

  /* --- Priority (5 vars) --- */
  --color-priority-lowest: var(--color-palette-gray);
  --color-priority-low: var(--color-palette-blue);
  --color-priority-medium: var(--color-palette-amber);
  --color-priority-high: var(--color-palette-orange);
  --color-priority-highest: var(--color-palette-red);

  /* --- Issue Type (5 vars) --- */
  --color-issue-type-task: var(--color-palette-blue);
  --color-issue-type-bug: var(--color-palette-red);
  --color-issue-type-story: var(--color-palette-purple);
  --color-issue-type-epic: var(--color-palette-amber);
  --color-issue-type-subtask: var(--color-palette-gray);

  /* --- Landing (4 vars) --- */
  --color-landing-accent: light-dark(var(--p-cyan-500), var(--p-cyan-400));
  --color-landing-accent-alt: light-dark(var(--p-purple-500), var(--p-purple-400));
  --color-landing-accent-teal: light-dark(var(--p-teal-500), var(--p-teal-400));
  --color-ui-bg-hero: var(--p-gray-950);

  /* --- Legacy: shadcn "primary" alias (used by Calendar, BoardToolbar) --- */
  --color-primary: var(--color-brand);
  --color-primary-hover: var(--color-brand-hover);

  /* --- Brand feature accents (used by time tracking, calendar, onboarding) --- */
  --color-brand-cyan-text: light-dark(var(--p-cyan-600), var(--p-cyan-400));
  --color-brand-cyan-bg: light-dark(var(--p-cyan-500), var(--p-cyan-400));
  --color-brand-cyan-border: light-dark(var(--p-cyan-600), var(--p-cyan-400));
  --color-brand-cyan-track: light-dark(var(--p-cyan-100), rgba(8, 145, 178, 0.4));
  --color-brand-indigo-text: light-dark(var(--p-indigo-600), var(--p-indigo-400));
  --color-brand-indigo-bg: light-dark(var(--p-indigo-500), var(--p-indigo-400));
  --color-brand-indigo-border: light-dark(var(--p-indigo-600), var(--p-indigo-400));
  --color-brand-indigo-track: light-dark(var(--p-indigo-100), rgba(49, 46, 129, 0.4));
  --color-brand-teal-text: light-dark(var(--p-teal-600), var(--p-teal-400));
  --color-brand-teal-bg: light-dark(var(--p-teal-500), var(--p-teal-400));
  --color-brand-teal-border: light-dark(var(--p-teal-600), var(--p-teal-400));
  --color-brand-teal-track: light-dark(var(--p-teal-100), rgba(19, 78, 74, 0.4));
  --color-brand-emerald-text: light-dark(var(--p-emerald-600), var(--p-emerald-400));
  --color-brand-emerald-bg: light-dark(var(--p-emerald-500), var(--p-emerald-400));
  --color-brand-emerald-border: light-dark(var(--p-emerald-600), var(--p-emerald-400));
  --color-brand-emerald-track: light-dark(var(--p-emerald-100), rgba(6, 78, 59, 0.4));

  /* Custom Spacing */
  --spacing-form-field: 16px;
  --spacing-section: 32px;

  /* Project Animations */
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes slide-up {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes scale-in {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  --animation-fade-in: fade-in 0.3s ease-out;
  --animation-slide-up: slide-up 0.4s ease-out;
  --animation-scale-in: scale-in 0.2s ease-out;
}

/* ============================================================
 * TIER 1 — Color Primitives
 * Raw hue values. Never used directly in components.
 * Defined on :root so Tier 2 can reference them.
 * ============================================================ */
:root {
  color-scheme: light dark;

  /* White / Black */
  --p-white: #FFFFFF;
  --p-black: #000000;

  /* Gray */
  --p-gray-50: #F9FAFB;
  --p-gray-100: #F3F4F6;
  --p-gray-200: #E5E7EB;
  --p-gray-300: #D1D5DB;
  --p-gray-400: #9CA3AF;
  --p-gray-500: #6B7280;
  --p-gray-600: #4B5563;
  --p-gray-700: #374151;
  --p-gray-800: #1F2937;
  --p-gray-900: #111827;
  --p-gray-950: #030712;

  /* Indigo (Brand) */
  --p-indigo-50: #EEF2FF;
  --p-indigo-100: #E0E7FF;
  --p-indigo-200: #C7D2FE;
  --p-indigo-300: #A5B4FC;
  --p-indigo-400: #818CF8;
  --p-indigo-500: #6366F1;
  --p-indigo-600: #4F46E5;
  --p-indigo-700: #4338CA;
  --p-indigo-800: #3730A3;
  --p-indigo-900: #312E81;
  --p-indigo-950: #1E1B4B;

  /* Purple (Accent) */
  --p-purple-50: #FAF5FF;
  --p-purple-100: #F3E8FF;
  --p-purple-200: #E9D5FF;
  --p-purple-300: #D8B4FE;
  --p-purple-400: #C084FC;
  --p-purple-500: #A855F7;
  --p-purple-600: #9333EA;
  --p-purple-700: #7E22CE;
  --p-purple-800: #6B21A8;
  --p-purple-900: #581C87;
  --p-purple-950: #3B0764;

  /* Blue */
  --p-blue-50: #EFF6FF;
  --p-blue-100: #DBEAFE;
  --p-blue-200: #BFDBFE;
  --p-blue-300: #93C5FD;
  --p-blue-400: #60A5FA;
  --p-blue-500: #3B82F6;
  --p-blue-600: #2563EB;
  --p-blue-700: #1D4ED8;
  --p-blue-800: #1E40AF;
  --p-blue-900: #1E3A8A;
  --p-blue-950: #172554;

  /* Red */
  --p-red-50: #FEF2F2;
  --p-red-100: #FEE2E2;
  --p-red-200: #FECACA;
  --p-red-300: #FCA5A5;
  --p-red-400: #F87171;
  --p-red-500: #EF4444;
  --p-red-600: #DC2626;
  --p-red-700: #B91C1C;
  --p-red-800: #991B1B;
  --p-red-900: #7F1D1D;
  --p-red-950: #450A0A;

  /* Green */
  --p-green-50: #F0FDF4;
  --p-green-100: #DCFCE7;
  --p-green-200: #BBF7D0;
  --p-green-300: #86EFAC;
  --p-green-400: #4ADE80;
  --p-green-500: #22C55E;
  --p-green-600: #16A34A;
  --p-green-700: #15803D;
  --p-green-800: #166534;
  --p-green-900: #14532D;
  --p-green-950: #052E16;

  /* Amber */
  --p-amber-50: #FFFBEB;
  --p-amber-100: #FEF3C7;
  --p-amber-200: #FDE68A;
  --p-amber-300: #FCD34D;
  --p-amber-400: #FBBF24;
  --p-amber-500: #F59E0B;
  --p-amber-600: #D97706;
  --p-amber-700: #B45309;
  --p-amber-800: #92400E;
  --p-amber-900: #78350F;
  --p-amber-950: #451A03;

  /* Orange */
  --p-orange-50: #FFF7ED;
  --p-orange-100: #FFEDD5;
  --p-orange-200: #FED7AA;
  --p-orange-300: #FDBA74;
  --p-orange-400: #FB923C;
  --p-orange-500: #F97316;
  --p-orange-600: #EA580C;
  --p-orange-700: #C2410C;
  --p-orange-800: #9A3412;
  --p-orange-900: #7C2D12;
  --p-orange-950: #431407;

  /* Pink */
  --p-pink-50: #FDF2F8;
  --p-pink-100: #FCE7F3;
  --p-pink-200: #FBCFE8;
  --p-pink-300: #F9A8D4;
  --p-pink-400: #F472B6;
  --p-pink-500: #EC4899;
  --p-pink-600: #DB2777;
  --p-pink-700: #BE185D;
  --p-pink-800: #9D174D;
  --p-pink-900: #831843;
  --p-pink-950: #500724;

  /* Teal */
  --p-teal-50: #F0FDFA;
  --p-teal-100: #CCFBF1;
  --p-teal-200: #99F6E4;
  --p-teal-300: #5EEAD4;
  --p-teal-400: #2DD4BF;
  --p-teal-500: #14B8A6;
  --p-teal-600: #0D9488;
  --p-teal-700: #0F766E;
  --p-teal-800: #115E59;
  --p-teal-900: #134E4A;
  --p-teal-950: #042F2E;

  /* Cyan */
  --p-cyan-50: #ECFEFF;
  --p-cyan-100: #CFFAFE;
  --p-cyan-200: #A5F3FC;
  --p-cyan-300: #67E8F9;
  --p-cyan-400: #22D3EE;
  --p-cyan-500: #06B6D4;
  --p-cyan-600: #0891B2;
  --p-cyan-700: #0E7490;
  --p-cyan-800: #155E75;
  --p-cyan-900: #164E63;
  --p-cyan-950: #083344;

  /* Emerald */
  --p-emerald-50: #ECFDF5;
  --p-emerald-100: #D1FAE5;
  --p-emerald-200: #A7F3D0;
  --p-emerald-300: #6EE7B7;
  --p-emerald-400: #34D399;
  --p-emerald-500: #10B981;
  --p-emerald-600: #059669;
  --p-emerald-700: #047857;
  --p-emerald-800: #065F46;
  --p-emerald-900: #064E3B;
  --p-emerald-950: #022C22;

  /* Legacy compat */
  --color-light: #ffffff;
  --color-dark: #171717;
}

/* Consistent focus indicators for accessibility */
*:focus-visible {
  outline: 2px solid var(--color-ui-border-focus);
  outline-offset: 2px;
}

.accent-text {
  @apply text-ui-text-secondary;
}

body {
  font-family:
    "Inter Variable",
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
  color: var(--color-ui-text);
  background: var(--color-ui-bg);
}

/* Base button styles - Tailwind v4 removed cursor:pointer from buttons by default */
@layer base {
  button:not([disabled]),
  [role="button"]:not([disabled]) {
    cursor: pointer;
  }
}

/* BlockNote editor customizations for minimal design */
.bn-container {
  @apply bg-ui-bg;
}

.bn-editor {
  @apply text-ui-text;
  font-size: 16px;
  line-height: 1.6;
}

.bn-block-content {
  @apply text-ui-text;
}

/* Customize the editor to have more whitespace and minimal styling */
.ProseMirror {
  @apply focus:outline-none;
  padding: 2rem 0;
}

.ProseMirror p {
  @apply mb-4;
}

.ProseMirror h1 {
  @apply text-3xl font-bold mb-6 mt-8 text-ui-text;
}

.ProseMirror h2 {
  @apply text-2xl font-semibold mb-4 mt-6 text-ui-text;
}

.ProseMirror h3 {
  @apply text-xl font-medium mb-3 mt-5 text-ui-text;
}

.ProseMirror ul, .ProseMirror ol {
  @apply mb-4 pl-6;
}

.ProseMirror li {
  @apply mb-2;
}

.ProseMirror blockquote {
  @apply border-l-4 border-ui-border-secondary pl-4 italic text-ui-text-secondary mb-4;
}

.ProseMirror code {
  @apply bg-ui-bg-tertiary px-2 py-1 rounded text-sm font-mono text-ui-text;
}

.ProseMirror pre {
  @apply bg-ui-bg-tertiary p-4 rounded mb-4 overflow-x-auto;
}

.ProseMirror pre code {
  @apply bg-transparent p-0;
}

/* Utility classes for issue cards */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Drag and drop styles */
.dragging {
  opacity: 0.5;
}

.drag-over {
  background-color: var(--color-ui-bg-tertiary);
  border: 2px dashed var(--color-ui-text-tertiary);
}

/* Onboarding spotlight effect */
.onboarding-spotlight {
  position: relative;
  z-index: 45;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.5), 0 0 0 9999px rgba(0, 0, 0, 0.5);
  border-radius: 8px;
  transition: all 0.3s ease;
}
