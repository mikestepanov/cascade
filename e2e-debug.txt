
> nixelo@0.0.0 e2e C:\Users\mikes\Desktop\cascade
> playwright test "rbac.spec.ts" "--project=chromium" "--workers=1" "--retries=0" "--grep" "admin has full"

[dotenv@17.2.3] injecting env (25) from .env.local -- tip: Î“ÃœÃ–âˆ©â••Ã…  write to custom object with { processEnv: myObject }
â‰¡Æ’Ã´Âº Clearing Mailtrap inbox...

â‰¡Æ’Ã¦Ã‘ Setting up 3 test user(s)...

  â‰¡Æ’Ã¹Ã¦âˆ©â••Ã… teamLead: Deleted stale auth state
  â‰¡Æ’Ã¶Âº teamLead: Setting up auth for e2e-teamlead@inbox.mailtrap.io...
  â‰¡Æ’Ã¹Ã¦âˆ©â••Ã… teamLead: Deleting existing user to ensure fresh state...
  Î“Â£Ã´ teamLead: User created via API (s570bbama8gsqcr8j5pe3dhrx97xhgv4)
  Î“Â£Ã´ teamLead: Password verified successfully
  â‰¡Æ’Ã¶Ã‰ Attempting sign-in for e2e-teamlead@inbox.mailtrap.io...
  â‰¡Æ’Ã´Ã¯ Waiting for sign-in page...
  Î“Â£Ã´ Sign-in page loaded
  â‰¡Æ’Ã´Âº Filling and submitting form via JS...
  â‰¡Æ’ÃœÃ‡ Form submitted (submitting state: true, button: "Signing in...")

[1A[2K[WebServer] Sourcemap for "C:/Users/mikes/Desktop/cascade/node_modules/.pnpm/posthog-js@1.301.0/node_modules/posthog-js/react/dist/esm/index.js" points to missing source files
  Î“ÃœÃ¡âˆ©â••Ã… Submit button disappeared - form may have unmounted
  â‰¡Æ’Ã´Ã¤ Page content: Back to HomeWelcome backSign in to your account to continueSign in with GoogleorContinue with emailDon't have an account? Sign up;
import registerDevSW from '/@vite-plugin-pwa/pwa-entry-point-loaded';
registerDevSW();
;import('/@id/virtual:tanstack-start-client-entry')
  Î“Â£Ã´ User appears to be authenticated, checking URL...
  Î“Ã…â–’âˆ©â••Ã… 1s: URL = http://localhost:5555/signin
  Î“Ã…â–’âˆ©â••Ã… 6s: URL = http://localhost:5555/signin
  Î“Ã…â–’âˆ©â••Ã… 11s: URL = http://localhost:5555/signin
  Î“Ã…â–’âˆ©â••Ã… 16s: URL = http://localhost:5555/signin
  Î“ÃœÃ¡âˆ©â••Ã… Still not on dashboard after 20s wait
  Î“ÃœÃ¡âˆ©â••Ã… No redirect detected, URL: http://localhost:5555/signin, button: "null"
  Î“ÃœÃ¡âˆ©â••Ã… teamLead: Sign-in failed after API user creation
  Î“ÃœÃ¡âˆ©â••Ã… teamLead: Failed to create auth state
  â‰¡Æ’Ã¹Ã¦âˆ©â••Ã… teamMember: Deleted stale auth state
  â‰¡Æ’Ã¶Âº teamMember: Setting up auth for e2e-member@inbox.mailtrap.io...
  â‰¡Æ’Ã¹Ã¦âˆ©â••Ã… teamMember: Deleting existing user to ensure fresh state...
  Î“Â£Ã´ teamMember: User created via API (s572sq3jb0vhvce49nfseet6n97xghw7)
  Î“Â£Ã´ teamMember: Password verified successfully
  â‰¡Æ’Ã¶Ã‰ Attempting sign-in for e2e-member@inbox.mailtrap.io...
  â‰¡Æ’Ã´Ã¯ Waiting for sign-in page...
  Î“Â£Ã´ Sign-in page loaded
  â‰¡Æ’Ã´Âº Filling and submitting form via JS...
  â‰¡Æ’ÃœÃ‡ Form submitted (submitting state: true, button: "Signing in...")
  Î“Â£Ã´ Redirected to: http://localhost:5555/nixelo-e2e/dashboard
Î“Â£Ã´ Already on dashboard
  Î“Â£Ã´ teamMember: Auth state saved
  â‰¡Æ’Ã¹Ã¦âˆ©â••Ã… viewer: Deleted stale auth state
  â‰¡Æ’Ã¶Âº viewer: Setting up auth for e2e-viewer@inbox.mailtrap.io...
  â‰¡Æ’Ã¹Ã¦âˆ©â••Ã… viewer: Deleting existing user to ensure fresh state...
  Î“Â£Ã´ viewer: User created via API (s5793a4vbvr94r7pmwzbk6hnr57xgxhk)
  Î“Â£Ã´ viewer: Password verified successfully
  â‰¡Æ’Ã¶Ã‰ Attempting sign-in for e2e-viewer@inbox.mailtrap.io...
  â‰¡Æ’Ã´Ã¯ Waiting for sign-in page...
  Î“Â£Ã´ Sign-in page loaded
  â‰¡Æ’Ã´Âº Filling and submitting form via JS...
  â‰¡Æ’ÃœÃ‡ Form submitted (submitting state: true, button: "Signing in...")
  Î“Â£Ã´ Redirected to: http://localhost:5555/nixelo-e2e/dashboard
Î“Â£Ã´ Already on dashboard
  Î“Â£Ã´ viewer: Auth state saved

â‰¡Æ’Ã¶Ã‰ Setting up RBAC test project...

  Î“Â£Ã´ RBAC project created: RBAC
    - Company slug: nixelo-e2e
    - Admin: e2e-teamlead@inbox.mailtrap.io
    - Editor: e2e-member@inbox.mailtrap.io
    - Viewer: e2e-viewer@inbox.mailtrap.io
  Î“Â£Ã´ RBAC config saved to .auth/rbac-config.json

Î“Â£Ã  Global setup complete


Running 1 test using 1 worker

[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: â‰¡Æ’Ã¶Ã‰ encrypt with Dotenvx: https://dotenvx.com

[1A[2K[1/1] [chromium] Î“Ã‡â•‘ e2e\rbac.spec.ts:27:1 Î“Ã‡â•‘ admin has full project access
[1A[2K  1) [chromium] Î“Ã‡â•‘ e2e\rbac.spec.ts:27:1 Î“Ã‡â•‘ admin has full project access Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡

    Error: Admin auth state not found. Run global setup first.

       at fixtures\rbac.fixture.ts:138

      136 |   adminContext: async ({ browser }, use) => {
      137 |     if (!isAuthStateValid("admin")) {
    > 138 |       throw new Error("Admin auth state not found. Run global setup first.");
          |             ^
      139 |     }
      140 |     const context = await browser.newContext({
      141 |       storageState: getAuthPath("admin"),
        at Object.adminContext (C:\Users\mikes\Desktop\cascade\e2e\fixtures\rbac.fixture.ts:138:13)


[1A[2K  1 failed
    [chromium] Î“Ã‡â•‘ e2e\rbac.spec.ts:27:1 Î“Ã‡â•‘ admin has full project access Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡

[36m  Serving HTML report at http://localhost:9323. Press Ctrl+C to quit.[39m
